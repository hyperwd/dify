# -------------------------------------------------------------------------
# Dify AlmaLinux 9 部署环境配置示例
# 复制此文件为 .env 并根据需要修改配置
# -------------------------------------------------------------------------

# -------------------------------------------------------------------------
# 基础配置
# -------------------------------------------------------------------------

# Dify 密钥 (请修改为强密码)
SECRET_KEY=sk-9f73s3ljTXVcMT3Blb3ljTqtsKiGHXVcMT3BlbkFJLK7U

# 部署环境
DEPLOY_ENV=PRODUCTION

# 日志级别 (DEBUG, INFO, WARNING, ERROR)
LOG_LEVEL=INFO

# 时区设置
TZ=UTC

# 语言设置
LANG=en_US.UTF-8
LC_ALL=en_US.UTF-8

# -------------------------------------------------------------------------
# 数据库配置
# -------------------------------------------------------------------------

# PostgreSQL 数据库配置
POSTGRES_DB=dify
POSTGRES_USER=postgres
POSTGRES_PASSWORD=difyai123
DATABASE_URL=postgresql://postgres:difyai123@db:5432/dify

# Redis 缓存配置
REDIS_PASSWORD=difyai123
REDIS_URL=redis://redis:6379/0
CELERY_BROKER_URL=redis://redis:6379/1

# -------------------------------------------------------------------------
# 前端服务配置
# -------------------------------------------------------------------------

# 前端访问地址 (可选，默认与后端同域名)
CONSOLE_API_URL=
CONSOLE_WEB_URL=
APP_API_URL=
APP_WEB_URL=

# -------------------------------------------------------------------------
# 向量数据库配置
# -------------------------------------------------------------------------

# 向量数据库类型 (weaviate, qdrant, milvus)
VECTOR_STORE=weaviate

# Weaviate 配置
WEAVIATE_ENDPOINT=http://weaviate:8080
WEAVIATE_API_KEY=WVF5YThaHlkYwhGUSmCRgsX3tD5ngdN8pkih

# Qdrant 配置
QDRANT_URL=http://qdrant:6333
QDRANT_API_KEY=

# Milvus 配置
MILVUS_HOST=milvus
MILVUS_PORT=19530
MILVUS_USER=root
MILVUS_PASSWORD=Milvus

# -------------------------------------------------------------------------
# 存储配置
# -------------------------------------------------------------------------

# 存储类型 (local, s3, azure_blob, aliyun_oss, tencent_cos)
STORAGE_TYPE=local
STORAGE_LOCAL_PATH=storage

# AWS S3 配置 (如果使用 S3 存储)
S3_ENDPOINT=
S3_BUCKET_NAME=
S3_ACCESS_KEY=
S3_SECRET_KEY=
S3_REGION=us-east-1

# Azure Blob 配置 (如果使用 Azure Blob 存储)
AZURE_BLOB_ACCOUNT_NAME=
AZURE_BLOB_ACCOUNT_KEY=
AZURE_BLOB_CONTAINER_NAME=

# 阿里云 OSS 配置 (如果使用阿里云 OSS 存储)
ALIYUN_OSS_REGION=
ALIYUN_OSS_BUCKET_NAME=
ALIYUN_OSS_ACCESS_KEY_ID=
ALIYUN_OSS_ACCESS_KEY_SECRET=

# 腾讯云 COS 配置 (如果使用腾讯云 COS 存储)
TENCENT_COS_REGION=
TENCENT_COS_BUCKET_NAME=
TENCENT_COS_SECRET_ID=
TENCENT_COS_SECRET_KEY=

# -------------------------------------------------------------------------
# 模型配置
# -------------------------------------------------------------------------

# OpenAI 配置
OPENAI_API_BASE=https://api.openai.com/v1
OPENAI_API_KEY=

# Azure OpenAI 配置
AZURE_OPENAI_API_BASE=
AZURE_OPENAI_API_KEY=
AZURE_OPENAI_LLM_BASE=
AZURE_OPENAI_LLM_KEY=

# Anthropic 配置
ANTHROPIC_API_KEY=

# Google 配置
GOOGLE_API_KEY=

# Xinference 配置
XINFERENCE_SERVER_URL=

# -------------------------------------------------------------------------
# 代码执行配置
# -------------------------------------------------------------------------

# 代码执行服务配置
CODE_EXECUTION_ENDPOINT=http://sandbox:8194
CODE_EXECUTION_API_KEY=dify-sandbox
CODE_EXECUTION_TIMEOUT=15
CODE_EXECUTION_CONNECTION_TIMEOUT=10

# 代码执行限制
CODE_MAX_NUMBER=9223372036854775807
CODE_MIN_NUMBER=-9223372036854775808
CODE_STRING_MAX_LENGTH=80000
CODE_MAX_STRING_ARRAY_LENGTH=1000
CODE_MAX_OBJECT_ARRAY_LENGTH=1000
CODE_MAX_NUMBER_ARRAY_LENGTH=1000
CODE_MAX_STRING_OBJECT_LENGTH=1000
CODE_MAX_NUMBER_OBJECT_LENGTH=1000
CODE_MAX_DEPTH=5

# -------------------------------------------------------------------------
# 安全配置
# -------------------------------------------------------------------------

# 加密密钥 (用于敏感数据加密)
ENCRYPTION_KEY=

# CORS 配置
WEB_API_CORS_ALLOW_ORIGINS=*

# -------------------------------------------------------------------------
# 网络代理配置 (可选)
# -------------------------------------------------------------------------

# HTTP 代理
HTTP_PROXY=
HTTPS_PROXY=

# -------------------------------------------------------------------------
# SSL 证书配置 (可选)
# -------------------------------------------------------------------------

# SSL 证书路径 (如果使用 HTTPS)
SSL_CERT_PATH=./certbot/conf/live/your-domain.com/fullchain.pem
SSL_KEY_PATH=./certbot/conf/live/your-domain.com/privkey.pem

# 域名配置
DOMAIN_NAME=your-domain.com

# -------------------------------------------------------------------------
# 监控配置 (可选)
# -------------------------------------------------------------------------

# OpenTelemetry 配置
ENABLE_OTEL=false
OTLP_BASE_ENDPOINT=